# File Index - Complete Pipeline Reference

Quick reference to all files in the nucleotide binder design pipeline.

---

## ğŸ“š Documentation (START HERE)

### Main Guides

| File | Purpose | When to Read |
|------|---------|--------------|
| **PIPELINE_SUMMARY.md** | **Quick overview & status** | **Read this first!** |
| **COMPLETE_DOCUMENTATION.md** | Comprehensive guide with rationale | For complete understanding |
| **QUICKSTART.md** | 5-minute tutorial | When you want to start fast |
| **WORKFLOW.md** | Step-by-step workflows | When following the process |
| **README.md** | Project overview | For general information |
| **FILE_INDEX.md** | This file - navigation guide | When lost in files |

### Results Documentation

| File | Purpose |
|------|---------|
| `results/dATP_production/PREDICTION_SUMMARY.md` | dATP test results & analysis |

---

## ğŸ”§ Scripts (Tools)

### Stage 1: Basic Binder Design

| Script | What It Does | Usage |
|--------|--------------|-------|
| `generate_msas.py` | Generate MSAs for base configs | `python generate_msas.py` |
| `update_configs_with_msas.py` | Add MSA paths to configs | `python update_configs_with_msas.py` |
| `run_all_with_msas.sh` | Run all 4 nucleotides | `./run_all_with_msas.sh` |
| `analyze_predictions.py` | Analyze single predictions | `python analyze_predictions.py DIR` |

### Stage 2: Specificity Screening (NEW!)

| Script | What It Does | Usage |
|--------|--------------|-------|
| **`run_complete_specificity_pipeline.sh`** | **Master script - runs everything** | **`./run_complete_specificity_pipeline.sh`** |
| `generate_cdr_library.py` | Generate CDR variant library | `python generate_cdr_library.py` |
| `generate_library_msas.py` | Generate MSAs for library | `python generate_library_msas.py` |
| `run_specificity_screen.py` | Batch predictions | `python run_specificity_screen.py` |
| `analyze_specificity.py` | Calculate specificity scores | `python analyze_specificity.py` |

### Stage 3: Optogenetic Engineering

| Script | What It Does | Usage |
|--------|--------------|-------|
| `insert_optogenetic_domains.py` | Generate all 3 variants | `python insert_optogenetic_domains.py` |
| `insert_custom_optogenetic.py` | Insert into custom sequence | `python insert_custom_optogenetic.py --sequence SEQ --domain LOV2` |

### Deprecated/Legacy

| Script | Status | Note |
|--------|--------|------|
| `run_all_predictions.sh` | Superseded | Use `run_all_with_msas.sh` instead |

---

## ğŸ“ Data Directories

### Input Data

| Directory | Contents | Source |
|-----------|----------|--------|
| `pdbs/` | Reference PDB structures | Downloaded from RCSB |
| `configs/` | Base Boltz configs | Created by pipeline |
| `configs_with_msas/` | Configs with MSA paths | Generated by scripts |
| `msas/` | Generated MSAs | Generated by scripts |

### Results - Stage 1 (Basic)

| Directory | Contents |
|-----------|----------|
| `results/dATP_production/` | dATP prediction results (DONE) |
| `results/dGTP_production/` | dGTP predictions (if run) |
| `results/dCTP_production/` | dCTP predictions (if run) |
| `results/dTTP_production/` | dTTP predictions (if run) |
| `results/optogenetic_chimeras/` | Base optogenetic variants |

### Results - Stage 2 (Specificity)

| Directory | Contents | Read This |
|-----------|----------|-----------|
| `specificity_library/` | Complete library | `library_summary.txt` |
| `specificity_library/configs/` | 320 config files | (auto-generated) |
| `specificity_library/configs_with_msas/` | Configs with MSAs | (auto-generated) |
| `specificity_library/msas/` | Library MSAs | (auto-generated) |
| `specificity_library/screening_results/` | Prediction results | `screening_results.json` |
| **`specificity_library/analysis/`** | **Specificity analysis** | **`specificity_report.txt` â† READ THIS!** |

### Test Directory (if you ran --test)

| Directory | Contents |
|-----------|----------|
| `specificity_library_test/` | Test run with 5 variants per nucleotide |

---

## ğŸ¯ Key Files to Read

### After Stage 1 (dATP Test)

1. `results/dATP_production/PREDICTION_SUMMARY.md` - Complete analysis
2. `results/dATP_production/.../confidence_*.json` - Confidence scores

### After Stage 2 (Specificity Screening)

1. **`specificity_library/analysis/specificity_report.txt`** - **Top specific binders (MAIN RESULT)**
2. `specificity_library/analysis/specificity_analysis.csv` - Full data table
3. `specificity_library/analysis/top_binders_dATP.csv` - Best dATP binders
4. `specificity_library/analysis/top_binders_dGTP.csv` - Best dGTP binders
5. `specificity_library/analysis/top_binders_dCTP.csv` - Best dCTP binders
6. `specificity_library/analysis/top_binders_dTTP.csv` - Best dTTP binders

### After Stage 3 (Optogenetics)

1. `results/final_designs/*.fasta` - Ready for gene synthesis

---

## ğŸš€ Quick Command Reference

### First Time Setup (DONE)

```bash
# Already completed on 2026-01-08
cd ~/nucleotide_catchers
# Everything is ready!
```

### Test the Pipeline

```bash
cd ~/nucleotide_catchers/scripts

# Quick test (1 hour)
./run_complete_specificity_pipeline.sh --test

# Check results
cat ../specificity_library_test/analysis/specificity_report.txt
```

### Production Run

```bash
cd ~/nucleotide_catchers/scripts

# Full production (8-16 hours)
./run_complete_specificity_pipeline.sh

# Or quick mode (4-6 hours, lower quality)
./run_complete_specificity_pipeline.sh --quick

# Check results
cat ../specificity_library/analysis/specificity_report.txt
```

### Individual Steps

```bash
# If you want to run steps manually:

# Step 1: Generate library
python generate_cdr_library.py --variants-per-target 20 --seed 42

# Step 2: Generate MSAs
python generate_library_msas.py

# Step 3: Run predictions
python run_specificity_screen.py --quick  # or without --quick

# Step 4: Analyze
python analyze_specificity.py

# Step 5: Add optogenetics
python insert_custom_optogenetic.py --sequence "..." --domain LOV2
```

---

## ğŸ“Š Result Files Explained

### Stage 1 Results

```
results/dATP_production/
â””â”€â”€ boltz_results_dATP_binder/
    â””â”€â”€ predictions/
        â””â”€â”€ dATP_binder/
            â”œâ”€â”€ dATP_binder_model_0.cif           # Best structure
            â”œâ”€â”€ confidence_*_model_0.json         # Metrics
            â”œâ”€â”€ pae_*_model_0.npz                 # Error estimates
            â””â”€â”€ PREDICTION_SUMMARY.md             # Human-readable analysis
```

### Stage 2 Results

```
specificity_library/
â”œâ”€â”€ library_manifest.yaml                # Complete library metadata
â”œâ”€â”€ library_summary.txt                  # Human-readable summary
â”œâ”€â”€ screening_results/
â”‚   â”œâ”€â”€ screening_results.json           # Raw prediction data
â”‚   â””â”€â”€ */                               # Individual prediction directories
â””â”€â”€ analysis/
    â”œâ”€â”€ specificity_report.txt           # â† READ THIS! Top candidates
    â”œâ”€â”€ specificity_analysis.csv         # Full data table
    â”œâ”€â”€ top_binders_dATP.csv             # Best dATP-specific binders
    â”œâ”€â”€ top_binders_dGTP.csv             # Best dGTP-specific binders
    â”œâ”€â”€ top_binders_dCTP.csv             # Best dCTP-specific binders
    â””â”€â”€ top_binders_dTTP.csv             # Best dTTP-specific binders
```

### Stage 3 Results

```
results/final_designs/
â”œâ”€â”€ dATP_specific_LOV2.fasta             # dATP binder + LOV2
â”œâ”€â”€ dATP_specific_CRY2.fasta             # dATP binder + CRY2
â”œâ”€â”€ dATP_specific_BphP1.fasta            # dATP binder + BphP1
â””â”€â”€ ... (repeat for dGTP, dCTP, dTTP)
```

---

## ğŸ” Finding Information

### "Where do I start?"
â†’ Read `PIPELINE_SUMMARY.md`

### "I want to understand everything"
â†’ Read `COMPLETE_DOCUMENTATION.md`

### "I want to run it now"
â†’ Follow `QUICKSTART.md` OR run `./run_complete_specificity_pipeline.sh --test`

### "How do I run step X?"
â†’ Check `WORKFLOW.md`

### "What does this script do?"
â†’ Run `python SCRIPT.py --help`

### "Where are my results?"
â†’ Check `specificity_library/analysis/specificity_report.txt`

### "I want the best binder for dATP"
â†’ Read `specificity_library/analysis/top_binders_dATP.csv`

### "How do I add optogenetics?"
â†’ Use `insert_custom_optogenetic.py` (see WORKFLOW.md Stage 3)

### "Something went wrong"
â†’ Check `COMPLETE_DOCUMENTATION.md` Troubleshooting section

---

## ğŸ“ˆ Progress Tracking

### Stage 1: Basic Binder Design
- [x] Setup and installation
- [x] Generate MSAs
- [x] Run dATP prediction
- [x] Analyze results (Excellent scores!)
- [ ] Run other nucleotides (optional)

### Stage 2: Specificity Screening
- [x] Build CDR library generator
- [x] Build batch prediction system
- [x] Build specificity analyzer
- [x] Test pipeline (works!)
- [ ] Run production screen (YOUR NEXT STEP)

### Stage 3: Optogenetic Engineering
- [x] Build insertion tools
- [x] Generate test variants
- [ ] Insert domains into specific binders (after Stage 2)

---

## ğŸ“ Learning Path

**Beginner** (just want to use it):
1. `PIPELINE_SUMMARY.md` - Overview
2. `QUICKSTART.md` - Quick tutorial
3. Run `./run_complete_specificity_pipeline.sh --test`
4. Read results in `specificity_report.txt`

**Intermediate** (want to understand):
1. All above
2. `WORKFLOW.md` - Detailed workflows
3. `COMPLETE_DOCUMENTATION.md` - Scientific rationale

**Advanced** (want to modify):
1. All above
2. Read script source code
3. Check `--help` for all scripts
4. Modify CDR design strategies in `generate_cdr_library.py`

---

## ğŸ’¡ Tips

### File Management

**Large files** (*.cif, *.npz):
- Located in `results/` and `specificity_library/screening_results/`
- Can archive and compress after analysis
- Keep `analysis/` directory - it's small and important

**Most important files**:
1. `PIPELINE_SUMMARY.md` - Overview
2. `specificity_library/analysis/specificity_report.txt` - Main results
3. Final designs in `results/final_designs/` - For synthesis

**Can delete after success**:
- `specificity_library_test/` (test run)
- `*/boltz_results_*/` (after extracting sequences)
- Large *.npz files (after analysis)

### Script Organization

**Always run from `scripts/` directory**:
```bash
cd ~/nucleotide_catchers/scripts
python SCRIPT_NAME.py
```

**Output goes to parent directory**:
```bash
# Scripts in scripts/
# Results in ../specificity_library/
```

---

## ğŸ†˜ Quick Help

```bash
# Pipeline status
cat PIPELINE_SUMMARY.md

# Script help
python SCRIPT.py --help

# Test if working
./run_complete_specificity_pipeline.sh --test

# View results
cat specificity_library/analysis/specificity_report.txt

# Check GPU
nvidia-smi

# Disk space
df -h ~/nucleotide_catchers
```

---

**Last Updated**: 2026-01-08
**Status**: All files documented and tested
**Next Step**: Run `./run_complete_specificity_pipeline.sh --test`

